\section{Reduction}\label{sec:reduction}

The rules for the reduction relation $\ssr$ are given in
Figure~\ref{fig:reduction}. The relation is written $\sto{e}{e\′}$, meaning that
the expression $e$ reduces to $e\′$ in a single small-step reduction step. We
write $\ssrt$ for the reflexive transitive closure of $\ssr$. Given a Tiny
Grace program $(\ol{M},e)$, we can `run' $e$ in the scope of $\ol{M}$ by
applying the substitution $[\object{\ol{M}}/\self]e$, and then applying $\ssrt$,
resulting in either an object literal $O$ or divergence.

\begin{figure}
  \centering
  \newcommand{\name}[1]{\tag{\textsc{R-#1}}}

  \begin{equation*}
    \name{Rec}\label{eq:red-rec}
    \AxiomC{$\sto{e}{e\′}$}
    \UnaryInfC{$\sto{e.m(\ol{e_a})}{e\′.m(\ol{e_a})}$}
    \DisplayProof
  \end{equation*}

  \begin{equation*}
    \name{Arg}\label{eq:red-arg}
    \AxiomC{$\sto{e}{e\′}$}
    \UnaryInfC{$\sto{O.m(\ol{O},e,\ol{e_a})}{O.m(\ol{O},e\′,\ol{e_a})}$}
    \DisplayProof
  \end{equation*}

  \begin{equation*}
    \name{Req}\label{eq:red-req}
    \AxiomC{$\method{m}{\ol{x:\tau_p}}{\tau}{e}\in\ol{M}$}
    \UnaryInfC{$\sto{\object{\ol{M}}.m(\ol{O})}
      {[\ol{O/x},\object{\ol{M}}/\self]e}$}
    \DisplayProof
  \end{equation*}

  \caption{Small-step semantics of Tiny Grace reduction}\label{fig:reduction}
\end{figure}

