% Document information.

\def\version{0.1.1}

\def\thetitle{Tiny Grace Formal Specification}
\def\theauthor{Timothy Jones}

\usepackage[
  pdftitle={\thetitle},
  pdfauthor={\theauthor},
  colorlinks,
  urlcolor=black,
  linkcolor=black,
  citecolor=black
]{hyperref}


% Math definitions.

% Syntax nonterminals.
\def\H{\mathcal{H}}
\def\M{\mathcal{M}}
\def\O{\mathcal{O}}

% Environment definitions.
\def\G{\Gamma}
\newcommand{\ctx}[3]{#1\vdash#2:#3}
\newcommand{\gctx}[2]{\ctx{\G}{#1}{#2}}
\newcommand{\ectx}[2]{\ctx{\varnothing}{#1}{#2}}
\newcommand{\cjdg}[2]{#1\mid#2}
\newcommand{\sjdg}[3]{\cjdg{#1\sub#2}{#3}}
\newcommand{\ssjdg}[2]{\sjdg{#1}{#2}\Sigma}
\newcommand{\mctx}[2]{#1\vdash#2~\checkmark}
\newcommand{\gmctx}[1]{\mctx{\G}{#1}}
\newcommand{\pjdg}[2]{(#1, #2)~\checkmark}

% Multiplicities with overline.
\def\*#1*{\overline{#1}}

% Shorter superscript prime.
\def\â€²{^\prime}

% Subtyping relation.
\def\sub{<\kern-1pt:}

% Braces and parentheses.
\def\bo{{\sffamily\upshape\{}}
\def\bc{{\sffamily\upshape\}}}
\def\po{{\sffamily\upshape(}}
\def\pc{{\sffamily\upshape)}}

% Tiny Grace keywords and constructs.
\newcommand{\mh}[4]{\overline{\meth{#1}{#2}{#3}{#4}}}
\newcommand{\mset}[4]{\text{\bo}\mh{#1}{#2}{#3}{#4}\text{\bc}}
\newcommand{\meth}[4]{#1\text{\po}\*#2:#3*\text{\pc}\to#4}
\newcommand{\mlst}[1]{\text{\lstinline{#1}}}
\newcommand{\key}[1]{{\sffamily\bfseries#1}}
\newcommand{\object}[1]{\text{\key{object}\bo}#1\text{\bc}}
\newcommand{\param}[2]{\text{\lstinline{#1}}:\type{#2}}
\newcommand{\head}[3]{\text{\lstinline{#1}\po}#2\text{\pc}\to\type{#3}}
\newcommand{\methh}[2]{\text{\key{method} }#1\ \text{\bo}#2\text{\bc}}
\newcommand{\method}[4]{\methh{#1\text{\po}#2\text{\pc}\to#3}{#4}}
\newcommand{\type}[1]{\text{\bo}#1\text{\bc}}
\newcommand{\self}{\text{\key{self}}}

% Small-step reduction relation.
\def\sto{\overset{_\mathcal{R}}\longrightarrow}
\def\stot{\overset{_{\mathcal{R}^*}}{\longrightarrow}}

% Big-step reduction relation.
\def\bto{\Downarrow}

% Variable and 'self' combo.
\def\xs{\overset{_\text{\sffamily\bfseries s}}x}


% Listings settings.

\lstdefinelanguage{TinyGrace}{%
  keywords={object,method,type,self,outer},
  sensitive=true,
  literate=
    {'}{$^\prime$}1
    {->\ }{$\to$ }1
}

\lstset{%
  basicstyle=\sffamily,
  keywordstyle=\bfseries,
  xleftmargin=1.5em,
  columns=fullflexible,
  language=TinyGrace,
  mathescape
}


% Theorem definitions.

\newtheoremstyle{theorem}{}{1em}{\itshape\addtolength\parskip{.5em}}{}{}{.}
  {.5em}{\thmname{\textsc{#1}}\thmnumber{\ #2}\thmnote{\ ({#3})}}
\theoremstyle{theorem}
\newtheorem{theorem}{Theorem}

\newtheoremstyle{lemma}{}{0em}{\itshape\addtolength\leftskip{1em}}{}{}{.}{.5em}
  {\thmname{\textsc{#1}}\thmnumber{\ #2}\thmnote{\ ({#3})}}
\theoremstyle{lemma}
\newtheorem{lemma}{Lemma}[theorem]

\renewenvironment{proof}
  {\noindent\upshape\addtolength\parskip{-.5em}\textsc{Proof.}}{\qed}

\newenvironment{match}{\addtolength\parskip{.5em}}{}
\newcommand{\case}[2]{\noindent\textsc{Case} #1: $#2$\\}

\newenvironment{scope}{}{}

