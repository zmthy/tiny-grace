% Document information.

\newcommand{\version}{0.1.1-pre}

\newcommand{\thetitle}{Tiny Grace Formal Specification}
\newcommand{\theauthor}{Timothy Jones}

\usepackage[
  pdftitle={\thetitle},
  pdfauthor={\theauthor},
  colorlinks,
  urlcolor=black,
  linkcolor=black,
  citecolor=black
]{hyperref}


% Math definitions.

% Environment definitions.
\newcommand{\G}{\Gamma}
\newcommand{\tjdg}[3]{#1\vdash#2:#3}
\newcommand{\gtjdg}[2]{\tjdg{\G}{#1}{#2}}
\newcommand{\oltjdg}[3]{#1\vdash\ol{#2:#3}}
\newcommand{\olgtjdg}[2]{\oltjdg{\G}{#1}{#2}}
\newcommand{\cjdg}[2]{#1\mid#2}
\newcommand{\sjdg}[2]{#1\sub#2}
\newcommand{\mjdg}[2]{#1\vdash#2~\checkmark}
\newcommand{\gmjdg}[1]{\mjdg{\G}{#1}}
\newcommand{\pjdg}[2]{(#1, #2)~\checkmark}

% Type shorthands.
\newcommand{\prmt}{\tau_p}
\newcommand{\rett}{\tau_m}
\newcommand{\rect}{\tau_r}

% Multiplicities with overline.
\newcommand{\ol}[1]{\overline{#1}}

% Shorter superscript prime.
\def\â€²{^\prime}

% Subtyping relation.
\newcommand{\sub}{<\kern-1pt:}

% Braces and parentheses.
\newcommand{\bo}{\text{\sffamily\upshape\{}}
\newcommand{\bc}{\text{\sffamily\upshape\}}}
\newcommand{\po}{\text{\sffamily\upshape(}}
\newcommand{\pc}{\text{\sffamily\upshape)}}

% Tiny Grace keywords and constructs.
\newcommand{\key}[1]{\text{\sffamily\bfseries#1}}
\newcommand{\oc}[1]{\bo~\!#1~\!\bc}
\newcommand{\ocol}[1]{\oc{\ol{#1}}}
\newcommand{\koc}[2]{\key{#1}~\!\oc{#2}}
\newcommand{\object}[1]{\koc{object}{#1}}
\newcommand{\etype}{\key{type}~\!\bo\bc}
\newcommand{\type}[1]{\koc{type}{#1}}
\newcommand{\meth}[2]{\key{method}~#1~\oc{#2}}
\newcommand{\method}[4]{\meth{#1\po#2\pc\to#3}{#4}}
\newcommand{\header}[4]{#1\po\ol{#2:#3}\pc\to#4}
\newcommand{\self}{\text{\sffamily\upshape{self}}}
\newcommand{\param}[2]{\text{\lstinline{#1}}:\type{#2}}
\newcommand{\typeol}[1]{\type{\ol{#1}}}
\newcommand{\range}[2]{#1\dots#2}

% Small-step reduction relation.
\newcommand{\ssr}{\longrightarrow}
\newcommand{\ssrt}{\longrightarrow^*}
\newcommand{\sto}[2]{#1\longrightarrow#2}
\newcommand{\stot}[2]{#1\longrightarrow^*#2}

% Big-step reduction relation.
\newcommand{\bto}{\Downarrow}


% Listings settings.

\lstdefinelanguage{TinyGrace}{%
  keywords={object,method,type,outer},
  sensitive=true,
  literate=
    {'}{$^\prime$}1
    {->\ }{$\to$ }1
}

\lstset{%
  basicstyle=\sffamily,
  keywordstyle=\bfseries,
  xleftmargin=1.5em,
  columns=fullflexible,
  language=TinyGrace,
  mathescape
}


% Theorem definitions.

\newcounter{theorems}
\stepcounter{theorems}
\newenvironment{theorem}[1]
  {\let\oldparindent=\parindent\setlength{\parindent}{0em}
    \textsc{Theorem} \thetheorems\stepcounter{theorems} (#1)\itshape}
  {\setlength{\parindent}{\oldparindent}}


\newenvironment{lemma}[1]{}{}

\renewenvironment{proof}
  {\vspace{1em}\noindent\upshape\textsc{Proof.}}{\qed}

\newenvironment{iflist}{\vspace{1em}If:
  \begin{enumerate}[
    label=\bfseries\upshape\sffamily\alph*.,
    align=left,
    labelwidth=2.5em,
    labelsep=0em,
    leftmargin=4.5em,
    topsep=0em,
    itemsep=0em,
    parsep=0em
  ]}{\end{enumerate}}
\newcommand{\tif}[1]{\begin{iflist}\item#1\end{iflist}}
\newcommand{\thn}[1]{\par{}then:\par\hspace{2em}#1}
\newcommand{\tor}[1]{\par{}or:\par\hspace{2em}#1}

\newenvironment{match}{\addtolength\parskip{.5em}}{}
\newcommand{\case}[2]{\noindent\textsc{Case} #1: $#2$\\}

\newenvironment{scope}{}{}

