% Document information.

\newcommand{\version}{0.1.1-pre}

\newcommand{\thetitle}{Tiny Grace Formal Specification}
\newcommand{\theauthor}{Timothy Jones}

\usepackage[
  pdftitle={\thetitle},
  pdfauthor={\theauthor},
  colorlinks,
  urlcolor=black,
  linkcolor=black,
  citecolor=black
]{hyperref}


% Math definitions.

% Environment definitions.
\newcommand{\G}{\Gamma}
\newcommand{\tjdg}[3]{#1\vdash#2:#3}
\newcommand{\gtjdg}[2]{\tjdg{\G}{#1}{#2}}
\newcommand{\etjdg}[2]{\tjdg{\varnothing}{#1}{#2}}
\newcommand{\cjdg}[2]{#1\mid#2}
\newcommand{\sjdg}[3]{\cjdg{#1\sub#2}{#3}}
\newcommand{\ssjdg}[2]{\sjdg{#1}{#2}\Sigma}
\newcommand{\mjdg}[2]{#1\vdash#2~\checkmark}
\newcommand{\gmjdg}[1]{\mjdg{\G}{#1}}
\newcommand{\pjdg}[2]{(#1, #2)~\checkmark}

% Multiplicities with overline.
\newcommand{\ol}[1]{\overline{#1}}

% Shorter superscript prime.
\def\â€²{^\prime}

% Subtyping relation.
\newcommand{\sub}{<\kern-1pt:}

% Braces and parentheses.
\newcommand{\bo}{{\sffamily\upshape\{}}
\newcommand{\bc}{{\sffamily\upshape\}}}
\newcommand{\po}{{\sffamily\upshape(}}
\newcommand{\pc}{{\sffamily\upshape)}}

% Tiny Grace keywords and constructs.
\newcommand{\mh}[4]{\ol{\meth{#1}{#2}{#3}{#4}}}
\newcommand{\mset}[4]{\text{\key{type}~\bo}\mh{#1}{#2}{#3}{#4}\text{\bc}}
\newcommand{\meth}[4]{#1\text{\po}\ol{#2:#3}\text{\pc}\to#4}
\newcommand{\mlst}[1]{\text{\lstinline{#1}}}
\newcommand{\key}[1]{{\sffamily\bfseries#1}}
\newcommand{\object}[1]{\text{\key{object}\bo}#1\text{\bc}}
\newcommand{\param}[2]{\text{\lstinline{#1}}:\type{#2}}
\newcommand{\head}[3]{\text{\lstinline{#1}\po}#2\text{\pc}\to\type{#3}}
\newcommand{\methh}[2]{\text{\key{method} }#1\ \text{\bo}#2\text{\bc}}
\newcommand{\method}[4]{\methh{#1\text{\po}#2\text{\pc}\to#3}{#4}}
\newcommand{\type}[1]{\text{\key{type}~\bo}#1\text{\bc}}
\newcommand{\self}{\text{\key{self}}}

% Small-step reduction relation.
\newcommand{\sto}{\overset{_\mathcal{R}}\longrightarrow}
\newcommand{\stot}{\overset{_{\mathcal{R}^*}}{\longrightarrow}}

% Big-step reduction relation.
\newcommand{\bto}{\Downarrow}

% Variable and 'self' combo.
\newcommand{\xs}{\overset{_\text{\sffamily\bfseries s}}x}


% Listings settings.

\lstdefinelanguage{TinyGrace}{%
  keywords={object,method,type,self,outer},
  sensitive=true,
  literate=
    {'}{$^\prime$}1
    {->\ }{$\to$ }1
}

\lstset{%
  basicstyle=\sffamily,
  keywordstyle=\bfseries,
  xleftmargin=1.5em,
  columns=fullflexible,
  language=TinyGrace,
  mathescape
}


% Theorem definitions.

\newtheoremstyle{theorem}{}{1em}{\itshape\addtolength\parskip{.5em}}{}{}{.}
  {.5em}{\thmname{\textsc{#1}}\thmnumber{\ #2}\thmnote{\ ({#3})}}
\theoremstyle{theorem}
\newtheorem{theorem}{Theorem}

\newtheoremstyle{lemma}{}{0em}{\itshape\addtolength\leftskip{1em}}{}{}{.}{.5em}
  {\thmname{\textsc{#1}}\thmnumber{\ #2}\thmnote{\ ({#3})}}
\theoremstyle{lemma}
\newtheorem{lemma}{Lemma}[theorem]

\renewenvironment{proof}
  {\noindent\upshape\addtolength\parskip{-.5em}\textsc{Proof.}}{\qed}

\newenvironment{match}{\addtolength\parskip{.5em}}{}
\newcommand{\case}[2]{\noindent\textsc{Case} #1: $#2$\\}

\newenvironment{scope}{}{}

