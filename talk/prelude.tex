\usetheme{slides}

\usepackage{mathtools}
\usepackage{listings}

\lstdefinelanguage{Grace}{%
  keywords={%
    object,method,class,type,is,def,var,self,return,
    import,as,dialect,true,false,inherits,super,outer
  },
  sensitive=true,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]",
  escapechar=\%
}

\lstset{%
  basicstyle=\sffamily,
  keywordstyle=\bfseries,
  commentstyle=\rmfamily\itshape,
  stringstyle=\ttfamily,
  emphstyle=\itshape,
  language=Grace,
  xleftmargin=1em,
  columns=fullflexible,
  showstringspaces=false,
  escapechar=\%,
  literate=
    {-}{-}1
    {+}{$+$}1
    {+\ }{$+$ }1
    {*}{$*$}1
    {*\ }{$*$ }1
    {\&}{$\&$}1
    {\&\ }{$\&$ }1
    {\&\&\ }{$\&$\kern-0.46em$\&$ }1
    {|}{$|$}1
    {|\ }{$|$ }1
    {->}{$\to$}1
    {->\ }{$\to$ }1
    {<}{$\langle$}1
    {>}{$\rangle$}1
    {<\ }{$<$ }1
    {\ >}{\ $>$}1
    {\ >\ }{\ $>$ }1
    {\ >=\ }{\ $\ge$ }1
    {:}{$:$}1
    {:\ }{$:$ }1
    {=}{$=$}1
    {=\ }{$=$ }1
    {:=}{$\coloneqq$}1
    {:=\ }{$\coloneqq$ }1
    {==\ }{$=$\kern-0.16em$=$ }1
    {!=}{$\neq$}1
    {!=\ }{$\neq$ }1
    {'}{$^\prime$}1
    {=>}{$\Rightarrow$}1
    {=>\ }{$\Rightarrow$ }1
}

\newcommand{\grace}[1]{\lstinline[language=Grace]{#1}}
\newcommand{\java}[1]{\lstinline[language=Java]{#1}}

\newcommand{\backcount}{\addtocounter{framenumber}{-1}}

% Syntax nonterminals.
\def\H{\mathcal{H}}
\def\M{\mathcal{M}}
\def\O{\mathcal{O}}

% Environment definitions.
\def\G{\Gamma}
\newcommand{\ctx}[3]{#1 \vdash #2 : #3}
\newcommand{\gctx}[2]{\ctx{\G}{#1}{#2}}
\newcommand{\ectx}[2]{\ctx{\varnothing}{#1}{#2}}
\newcommand{\mctx}[2]{#1 \vdash #2~\checkmark}
\newcommand{\gmctx}[1]{\mctx{\G}{#1}}
\newcommand{\pjdg}[2]{(#1, #2)~\checkmark}

% Multiplicities with overline.
\def\*#1*{\overline{#1}}

% Subtyping relation.
\def\sub{<\kern-1pt:}

% Braces and parentheses.
\def\bo{{\sffamily\upshape\{}}
\def\bc{{\sffamily\upshape\}}}
\def\po{{\sffamily\upshape(}}
\def\pc{{\sffamily\upshape)}}

% Tiny Grace keywords and constructs.
\newcommand{\mh}[4]{\overline{#1\text{\po}\*#2 : #3*\text{\pc} \to #4}}
\newcommand{\mset}[4]{\text{\bo}\mh{#1}{#2}{#3}{#4}\text{\bc}}
\newcommand{\mlst}[1]{\text{\lstinline{#1}}}
\newcommand{\key}[1]{{\sffamily\bfseries#1}}
\newcommand{\object}[1]{\text{\key{object}\bo}~#1~\text{\bc}}
\newcommand{\param}[2]{\text{\lstinline{#1} : }\type{#2}}
\newcommand{\head}[3]{\text{\lstinline{#1}\po}#2\text{\pc} \to \type{#3}}
\newcommand{\methh}[2]{\text{\key{method} }#1\ \text{\bo}~#2~\text{\bc}}
\newcommand{\method}[4]{\methh{#1\text{\po}#2\text{\pc }\to #3}{#4}}
\newcommand{\type}[1]{\text{\bo}#1\text{\bc}}
\newcommand{\self}{\text{\key{self}}}

% Small-step reduction relation.
\def\sto{\overset{_\mathcal{R}}\longrightarrow}
\def\stot{\overset{_{\mathcal{R}^*}}{\longrightarrow}}

% Big-step reduction relation.
\def\bto{\Downarrow}

% Variable and 'self' combo.
\def\xs{\overset{_\text{\sffamily\bfseries s}}x}


% Listings settings.

\lstdefinelanguage{TinyGrace}{%
  keywords={object,method,type,self,outer},
  sensitive=true,
  literate=
    {'}{$^\prime$}1
    {->\ }{$\to$ }1
}

\lstset{%
  basicstyle=\sffamily,
  keywordstyle=\bfseries,
  xleftmargin=1.5em,
  columns=fullflexible,
  language=TinyGrace,
  mathescape
}


% Theorem definitions.

%\newtheoremstyle{theorem}{}{1em}{\itshape\addtolength\parskip{.5em}}{}{}{.}
  %{.5em}{\thmname{\textsc{#1}}\thmnumber{\ #2}\thmnote{\ ({#3})}}
%\theoremstyle{theorem}
%\newtheorem{theorem}{Theorem}

%\newtheoremstyle{lemma}{}{0em}{\itshape\addtolength\leftskip{1em}}{}{}{.}{.5em}
  %{\thmname{\textsc{#1}}\thmnumber{\ #2}\thmnote{\ ({#3})}}
%\theoremstyle{lemma}
%\newtheorem{lemma}{Lemma}[theorem]

%\renewenvironment{proof}
  %{\noindent\upshape\addtolength\parskip{-.5em}\textsc{Proof.}}{\qed}

%\newenvironment{match}{\addtolength\parskip{.5em}}{}
%\newcommand{\case}[2]{\noindent\textsc{Case} #1: $#2$\\}

%\newenvironment{scope}{}{}

